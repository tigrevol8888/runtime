<!DOCTYPE html>
<style>

@import url(style.css);

</style>
<p>This is foo:
<div id="foo"></div>
<p>And this is bar:
<div id="bar"></div>
<script src="/build/d3-express.js"></script>
<script>

var module = d3.runtime().module();

var foo = module.variable(document.querySelector("#foo")).define("foo", [], () => {
  return Math.random();
});

var bar = module.variable(document.querySelector("#bar")).define("bar", ["foo"], (foo) => {
  return new Promise(resolve => {
    setTimeout(() => resolve(foo), 250);
  });
});

setTimeout(() => {
  foo.define("foo", [], () => {
    return [1, 2, 3, 4, 5];
  });
}, 750);

</script>
